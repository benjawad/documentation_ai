{
  "name": "app",
  "type": "directory",
  "path": "/app",
  "size": null,
  "children": [
    {
      "name": "config",
      "type": "directory",
      "path": "/app/config",
      "size": null,
      "children": [
        {
          "name": "__init__.py",
          "type": "file",
          "path": "/app/config/__init__.py",
          "size": 66,
          "children": null
        },
        {
          "name": "asgi.py",
          "type": "file",
          "path": "/app/config/asgi.py",
          "size": 389,
          "children": null
        },
        {
          "name": "celery.py",
          "type": "file",
          "path": "/app/config/celery.py",
          "size": 667,
          "children": null,
          "analysis": {
            "classes": [],
            "global_functions": [
              {
                "name": "debug_task",
                "args": [],
                "returns": null,
                "description": null
              }
            ]
          }
        },
        {
          "name": "settings.py",
          "type": "file",
          "path": "/app/config/settings.py",
          "size": 5365,
          "children": null
        },
        {
          "name": "urls.py",
          "type": "file",
          "path": "/app/config/urls.py",
          "size": 1044,
          "children": null
        },
        {
          "name": "wsgi.py",
          "type": "file",
          "path": "/app/config/wsgi.py",
          "size": 389,
          "children": null
        }
      ]
    },
    {
      "name": "core",
      "type": "directory",
      "path": "/app/core",
      "size": null,
      "children": [
        {
          "name": "llm_factory",
          "type": "directory",
          "path": "/app/core/llm_factory",
          "size": null,
          "children": [
            {
              "name": "__init__.py",
              "type": "file",
              "path": "/app/core/llm_factory/__init__.py",
              "size": 0,
              "children": null
            },
            {
              "name": "factory.py",
              "type": "file",
              "path": "/app/core/llm_factory/factory.py",
              "size": 0,
              "children": null
            },
            {
              "name": "providers.py",
              "type": "file",
              "path": "/app/core/llm_factory/providers.py",
              "size": 0,
              "children": null
            }
          ]
        },
        {
          "name": "management",
          "type": "directory",
          "path": "/app/core/management",
          "size": null,
          "children": [
            {
              "name": "commands",
              "type": "directory",
              "path": "/app/core/management/commands",
              "size": null,
              "children": [
                {
                  "name": "__init__.py",
                  "type": "file",
                  "path": "/app/core/management/commands/__init__.py",
                  "size": 0,
                  "children": null
                },
                {
                  "name": "analyze.py",
                  "type": "file",
                  "path": "/app/core/management/commands/analyze.py",
                  "size": 0,
                  "children": null
                }
              ]
            },
            {
              "name": "__init__.py",
              "type": "file",
              "path": "/app/core/management/__init__.py",
              "size": 0,
              "children": null
            }
          ]
        },
        {
          "name": "services",
          "type": "directory",
          "path": "/app/core/services",
          "size": null,
          "children": [
            {
              "name": "__init__.py",
              "type": "file",
              "path": "/app/core/services/__init__.py",
              "size": 0,
              "children": null
            },
            {
              "name": "architecture_service.py",
              "type": "file",
              "path": "/app/core/services/architecture_service.py",
              "size": 39956,
              "children": null,
              "analysis": {
                "classes": [
                  {
                    "name": "ArchitectureVisitor",
                    "type": "class",
                    "bases": [
                      "ast.NodeVisitor"
                    ],
                    "methods": [
                      {
                        "name": "__init__",
                        "args": [],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "visit_ClassDef",
                        "args": [
                          "node"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "visit_FunctionDef",
                        "args": [
                          "node"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "visit_AnnAssign",
                        "args": [
                          "node"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "visit_Assign",
                        "args": [
                          "node"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "_add_attribute",
                        "args": [
                          "name",
                          "type_str"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "_flatten_targets",
                        "args": [
                          "targets"
                        ],
                        "returns": "list",
                        "description": null
                      },
                      {
                        "name": "_is_self_attribute",
                        "args": [
                          "node"
                        ],
                        "returns": "bool",
                        "description": null
                      },
                      {
                        "name": "_get_id",
                        "args": [
                          "node"
                        ],
                        "returns": "str",
                        "description": null
                      }
                    ],
                    "attributes": [
                      {
                        "name": "class_stack",
                        "type": "list"
                      },
                      {
                        "name": "global_functions",
                        "type": "list"
                      },
                      {
                        "name": "structure",
                        "type": "list"
                      }
                    ],
                    "description": null
                  },
                  {
                    "name": "FastTypeEnricher",
                    "type": "class",
                    "bases": [],
                    "methods": [
                      {
                        "name": "__init__",
                        "args": [
                          "llm"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "enrich",
                        "args": [
                          "code_context",
                          "structure"
                        ],
                        "returns": "list[dict]",
                        "description": "Scans structure for missing types and asks Llama 3 to infer them."
                      },
                      {
                        "name": "_apply_patches",
                        "args": [
                          "structure",
                          "updates"
                        ],
                        "returns": null,
                        "description": "Applies the inferred types back into the Visitor's structure.\nComplexity: O(N*M) but N (classes) and M (attributes) are small."
                      }
                    ],
                    "attributes": [
                      {
                        "name": "llm",
                        "type": "Unknown"
                      }
                    ],
                    "description": "takes the JSON from the Visitor, finds the \"Unknown\" types, and asks SambaNova to fix them."
                  },
                  {
                    "name": "DeterministicPlantUMLConverter",
                    "type": "class",
                    "bases": [],
                    "methods": [
                      {
                        "name": "convert",
                        "args": [
                          "structure_json"
                        ],
                        "returns": "str",
                        "description": null
                      }
                    ],
                    "attributes": [],
                    "description": null
                  }
                ],
                "global_functions": []
              }
            },
            {
              "name": "architecture_summary.md",
              "type": "file",
              "path": "/app/core/services/architecture_summary.md",
              "size": 2953,
              "children": null
            },
            {
              "name": "class_relationships.json",
              "type": "file",
              "path": "/app/core/services/class_relationships.json",
              "size": 5634,
              "children": null
            },
            {
              "name": "files.py",
              "type": "file",
              "path": "/app/core/services/files.py",
              "size": 6149,
              "children": null,
              "analysis": {
                "classes": [
                  {
                    "name": "FileSystemNode",
                    "type": "class",
                    "bases": [],
                    "methods": [],
                    "attributes": [
                      {
                        "name": "children",
                        "type": "Optional[List[FileSystemNode]]"
                      },
                      {
                        "name": "name",
                        "type": "str"
                      },
                      {
                        "name": "path",
                        "type": "str"
                      },
                      {
                        "name": "size",
                        "type": "Optional[int]"
                      },
                      {
                        "name": "type",
                        "type": "Literal[file, directory]"
                      }
                    ],
                    "description": null
                  },
                  {
                    "name": "FileSystemVisitor",
                    "type": "class",
                    "bases": [],
                    "methods": [
                      {
                        "name": "visit",
                        "args": [
                          "root_path",
                          "max_depth"
                        ],
                        "returns": "dict",
                        "description": null
                      },
                      {
                        "name": "_visit_node",
                        "args": [
                          "path",
                          "current_depth",
                          "max_depth"
                        ],
                        "returns": "Optional[FileSystemNode]",
                        "description": null
                      }
                    ],
                    "attributes": [
                      {
                        "name": "IGNORED_DIRS",
                        "type": "Unknown"
                      },
                      {
                        "name": "IGNORED_FILES",
                        "type": "Unknown"
                      },
                      {
                        "name": "VIP_EXTENSIONS",
                        "type": "Unknown"
                      },
                      {
                        "name": "VIP_FILENAMES",
                        "type": "Unknown"
                      }
                    ],
                    "description": "A deterministic visitor for the file system.\nIMPROVED: Implements a \"VIP Pass\" to capture environment context (The Devil's Advocate Fix)."
                  },
                  {
                    "name": "TreeFormatter",
                    "type": "class",
                    "bases": [],
                    "methods": [
                      {
                        "name": "format",
                        "args": [
                          "node_dict"
                        ],
                        "returns": "str",
                        "description": null
                      },
                      {
                        "name": "_render",
                        "args": [
                          "node",
                          "lines",
                          "prefix",
                          "is_last"
                        ],
                        "returns": null,
                        "description": null
                      }
                    ],
                    "attributes": [],
                    "description": null
                  }
                ],
                "global_functions": []
              }
            },
            {
              "name": "full_project_context.json",
              "type": "file",
              "path": "/app/core/services/full_project_context.json",
              "size": 28805,
              "children": null
            },
            {
              "name": "project_service.py",
              "type": "file",
              "path": "/app/core/services/project_service.py",
              "size": 4031,
              "children": null,
              "analysis": {
                "classes": [
                  {
                    "name": "ProjectAnalyzer",
                    "type": "class",
                    "bases": [],
                    "methods": [
                      {
                        "name": "__init__",
                        "args": [
                          "root_path"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "analyze",
                        "args": [],
                        "returns": "Dict[str, Any]",
                        "description": null
                      },
                      {
                        "name": "_enrich_node_with_ast",
                        "args": [
                          "node"
                        ],
                        "returns": null,
                        "description": "Recursive function to walk the JSON tree. \nIf it finds a .py file, it runs ArchitectureVisitor and injects the data."
                      }
                    ],
                    "attributes": [
                      {
                        "name": "fs_visitor",
                        "type": "FileSystemVisitor"
                      },
                      {
                        "name": "root_path",
                        "type": "Unknown.resolve"
                      }
                    ],
                    "description": "Orchestrates the analysis.\n1. Uses FileSystemVisitor to walk the tree and filter noise.\n2. Uses ArchitectureVisitor to parse Python logic found in that tree."
                  }
                ],
                "global_functions": []
              }
            },
            {
              "name": "project_tree.json",
              "type": "file",
              "path": "/app/core/services/project_tree.json",
              "size": 9043,
              "children": null
            },
            {
              "name": "project_tree.txt",
              "type": "file",
              "path": "/app/core/services/project_tree.txt",
              "size": 1575,
              "children": null
            },
            {
              "name": "relationship_service.py",
              "type": "file",
              "path": "/app/core/services/relationship_service.py",
              "size": 15923,
              "children": null,
              "analysis": {
                "classes": [
                  {
                    "name": "ClassRelationship",
                    "type": "class",
                    "bases": [],
                    "methods": [],
                    "attributes": [
                      {
                        "name": "attributes",
                        "type": "List[Dict]"
                      },
                      {
                        "name": "description",
                        "type": "Optional[str]"
                      },
                      {
                        "name": "inherits",
                        "type": "Set[str]"
                      },
                      {
                        "name": "methods",
                        "type": "List[str]"
                      },
                      {
                        "name": "module",
                        "type": "str"
                      },
                      {
                        "name": "name",
                        "type": "str"
                      },
                      {
                        "name": "uses",
                        "type": "Set[str]"
                      }
                    ],
                    "description": "Represents relationships for a single class"
                  },
                  {
                    "name": "RelationshipExtractor",
                    "type": "class",
                    "bases": [],
                    "methods": [
                      {
                        "name": "__init__",
                        "args": [],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "extract_from_json",
                        "args": [
                          "project_json"
                        ],
                        "returns": "Dict[str, ClassRelationship]",
                        "description": "Extract relationships from your full_project_context.json\n\nArgs:\n    project_json: The JSON from ProjectAnalyzer.analyze()\n\nReturns:\n    Dict of class_name -> ClassRelationship"
                      },
                      {
                        "name": "_collect_class_names",
                        "args": [
                          "node"
                        ],
                        "returns": null,
                        "description": "First pass: Build index of all class names"
                      },
                      {
                        "name": "_extract_relationships",
                        "args": [
                          "node",
                          "current_path"
                        ],
                        "returns": null,
                        "description": "Second pass: Extract relationships"
                      },
                      {
                        "name": "_process_class",
                        "args": [
                          "class_info",
                          "module_path"
                        ],
                        "returns": null,
                        "description": "Process a single class from the JSON"
                      },
                      {
                        "name": "_clean_type",
                        "args": [
                          "type_str"
                        ],
                        "returns": "Optional[str]",
                        "description": "Clean type string to extract the core class name.\n\nExamples:\n    \"Optional[User]\" -> \"User\"\n    \"List[Product]\" -> \"Product\"\n    \"ast.NodeVisitor\" -> \"NodeVisitor\"\n    \"Literal[file, directory]\" -> None (ignore)"
                      },
                      {
                        "name": "to_dict",
                        "args": [
                          "filter_orphans"
                        ],
                        "returns": "Dict[str, Dict]",
                        "description": "Convert to JSON-serializable dict.\n\nArgs:\n    filter_orphans: Remove classes with no relationships"
                      },
                      {
                        "name": "to_mermaid",
                        "args": [
                          "focus_on"
                        ],
                        "returns": "str",
                        "description": "Generate Mermaid class diagram.\n\nArgs:\n    focus_on: List of class names to show (None = show all with relationships)"
                      },
                      {
                        "name": "get_core_classes",
                        "args": [
                          "min_connections"
                        ],
                        "returns": "List[str]",
                        "description": "Find core classes (most connected).\n\nArgs:\n    min_connections: Minimum total relationships"
                      }
                    ],
                    "attributes": [
                      {
                        "name": "PRIMITIVES",
                        "type": "Unknown"
                      },
                      {
                        "name": "all_class_names",
                        "type": "Set[str]"
                      },
                      {
                        "name": "classes",
                        "type": "Dict[str, ClassRelationship]"
                      }
                    ],
                    "description": "Extracts relationships from your project JSON.\nWorks directly with the output of ProjectAnalyzer."
                  },
                  {
                    "name": "EnhancedProjectAnalyzer",
                    "type": "class",
                    "bases": [],
                    "methods": [
                      {
                        "name": "__init__",
                        "args": [
                          "root_path"
                        ],
                        "returns": null,
                        "description": null
                      },
                      {
                        "name": "analyze",
                        "args": [],
                        "returns": "Dict",
                        "description": "Full analysis with relationships.\n\nReturns:\n    {\n        'tree': {...},  # Original tree\n        'relationships': {...},  # Class relationships\n        'mermaid': \"...\",  # Mermaid diagram\n        'core_classes': [...]  # Most connected classes\n    }"
                      },
                      {
                        "name": "save_outputs",
                        "args": [
                          "output_dir"
                        ],
                        "returns": null,
                        "description": "Save all outputs to files"
                      },
                      {
                        "name": "_generate_summary",
                        "args": [
                          "result"
                        ],
                        "returns": "str",
                        "description": "Generate markdown summary"
                      }
                    ],
                    "attributes": [
                      {
                        "name": "project_analyzer",
                        "type": "ProjectAnalyzer"
                      },
                      {
                        "name": "relationship_extractor",
                        "type": "RelationshipExtractor"
                      }
                    ],
                    "description": "Wrapper that adds relationship analysis to your ProjectAnalyzer.\n\nUsage:\n    analyzer = EnhancedProjectAnalyzer(\"/app\")\n    result = analyzer.analyze()\n    \n    # result now contains:\n    # - 'tree': Original project tree with AST analysis\n    # - 'relationships': Class relationships\n    # - 'mermaid': Mermaid diagram"
                  }
                ],
                "global_functions": [
                  {
                    "name": "main",
                    "args": [],
                    "returns": null,
                    "description": "Command line usage"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "tests",
          "type": "directory",
          "path": "/app/core/tests",
          "size": null,
          "children": [
            {
              "name": "__init__.py",
              "type": "file",
              "path": "/app/core/tests/__init__.py",
              "size": 0,
              "children": null
            },
            {
              "name": "test_health.py",
              "type": "file",
              "path": "/app/core/tests/test_health.py",
              "size": 411,
              "children": null,
              "analysis": {
                "classes": [],
                "global_functions": [
                  {
                    "name": "test_health_check",
                    "args": [
                      "client"
                    ],
                    "returns": null,
                    "description": "Test that health check endpoint returns 200"
                  }
                ]
              }
            }
          ]
        },
        {
          "name": "__init__.py",
          "type": "file",
          "path": "/app/core/__init__.py",
          "size": 0,
          "children": null
        },
        {
          "name": "apps.py",
          "type": "file",
          "path": "/app/core/apps.py",
          "size": 146,
          "children": null,
          "analysis": {
            "classes": [
              {
                "name": "CoreConfig",
                "type": "class",
                "bases": [
                  "AppConfig"
                ],
                "methods": [],
                "attributes": [
                  {
                    "name": "default_auto_field",
                    "type": "Constant"
                  },
                  {
                    "name": "name",
                    "type": "Constant"
                  }
                ],
                "description": null
              }
            ],
            "global_functions": []
          }
        },
        {
          "name": "models.py",
          "type": "file",
          "path": "/app/core/models.py",
          "size": 0,
          "children": null
        },
        {
          "name": "urls.py",
          "type": "file",
          "path": "/app/core/urls.py",
          "size": 136,
          "children": null
        },
        {
          "name": "views.py",
          "type": "file",
          "path": "/app/core/views.py",
          "size": 2126,
          "children": null,
          "analysis": {
            "classes": [],
            "global_functions": [
              {
                "name": "health_check",
                "args": [
                  "request"
                ],
                "returns": null,
                "description": "Health check endpoint for monitoring and load balancers.\nReturns 200 OK if all services are healthy."
              }
            ]
          }
        }
      ]
    },
    {
      "name": "manage.py",
      "type": "file",
      "path": "/app/manage.py",
      "size": 662,
      "children": null,
      "analysis": {
        "classes": [],
        "global_functions": [
          {
            "name": "main",
            "args": [],
            "returns": null,
            "description": "Run administrative tasks."
          }
        ]
      }
    }
  ]
}